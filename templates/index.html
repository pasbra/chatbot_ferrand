{% if reponse %}
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const loader = document.getElementById("loader");
        const typedText = document.getElementById("typed-text");
        let fullText = `{{ reponse|safe }}`;

        let index = 0;
        let speed = 50;

        function startTyping() {
            if (index < fullText.length) {
                if (fullText.substring(index, index + 4) === "<br>") {
                    typedText.innerHTML += "<br>";
                    index += 4;
                } else {
                    typedText.innerHTML += fullText.charAt(index);
                    index++;
                }
                setTimeout(startTyping, speed);
            }
        }

        loader.style.display = "block";

        setTimeout(() => {
            loader.style.display = "none";
            startTyping();
        }, 2000);
    });
</script>
{% endif %}
