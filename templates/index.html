<script>
    const loader = document.getElementById("loader");
    const typedText = document.getElementById("typed-text");
    let fullText = `{{ reponse|safe }}`; // ICI Correction !

    let index = 0;
    let speed = 50; // vitesse d'écriture

    function startTyping() {
      if (index < fullText.length) {
        if (fullText.substring(index, index + 4) === "<br>") {
          typedText.innerHTML += "<br>";
          index += 4;
        } else {
          typedText.innerHTML += fullText.charAt(index);
          index++;
        }
        setTimeout(startTyping, speed);
      }
    }

    // Au chargement du résultat
    window.onload = function() {
      loader.style.display = "block"; // afficher le loader

      setTimeout(() => {
        loader.style.display = "none"; // cacher le loader
        startTyping(); // démarrer écriture
      }, 2000); // temps d'attente avant affichage
    }
</script>
